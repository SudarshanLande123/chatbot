<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UPSC Pathshala AI - Your Digital Mentor</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }

        :root {
            --saffron: #FF9933;
            --saffron-dark: #f08c2a;
            --green: #138808;
            --gold: #D4AF37;
            --deep-blue: #0c1120;
            --card-blue: #141b2d;
            --border-blue: #2a334e;
            --text-light: #e2e8f0;
            --text-secondary: #94a3b8;
            --danger: #ef4444;
            --sidebar-width: 280px;
            --transition: all 0.3s ease;
        }

        body {
            background-color: var(--deep-blue);
            color: var(--text-light);
            display: flex;
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        .ashoka-emblem {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 200;
            opacity: 0.1;
            pointer-events: none; /* Make it non-interactive */
        }
        
        .ashoka-emblem img {
            height: 150px;
        }

        /* Sidebar */
        .sidebar {
            width: var(--sidebar-width);
            background-color: #080c18;
            height: 100vh;
            position: fixed;
            left: 0;
            top: 0;
            padding: 25px 0;
            border-right: 1px solid var(--border-blue);
            display: flex;
            flex-direction: column;
            z-index: 100;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 0 25px 30px;
            border-bottom: 1px solid var(--border-blue);
            margin-bottom: 30px;
        }

        .logo-icon {
            background: linear-gradient(135deg, var(--saffron), var(--gold));
            width: 45px;
            height: 45px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            color: white;
        }

        .logo-text {
            font-size: 1.4rem;
            font-weight: 700;
            background: linear-gradient(to right, var(--saffron), var(--text-light));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .sidebar-menu {
            padding: 0 15px;
            flex-grow: 1;
        }

        .menu-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 14px 20px;
            border-radius: 10px;
            margin-bottom: 8px;
            cursor: pointer;
            transition: var(--transition);
            color: var(--text-secondary);
        }

        .menu-item:hover, .menu-item.active {
            background: rgba(255, 153, 51, 0.1);
            color: var(--saffron);
        }

        .menu-item i {
            width: 24px;
            text-align: center;
        }

        .sidebar-footer {
            padding: 20px 25px 0;
            border-top: 1px solid var(--border-blue);
            color: var(--text-secondary);
            font-size: 0.85rem;
            text-align: center;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            margin-left: var(--sidebar-width);
            padding: 30px;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.2rem;
            font-weight: 700;
            background: linear-gradient(to right, var(--text-light), var(--saffron));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .user-controls {
            display: flex;
            gap: 15px;
        }

        .btn {
            background: var(--card-blue);
            border: 1px solid var(--border-blue);
            color: var(--text-light);
            padding: 10px 18px;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: var(--transition);
        }

        .btn:hover {
            background: rgba(255, 153, 51, 0.1);
            border-color: var(--saffron);
        }

        /* Dashboard Grid */
        .dashboard {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin-bottom: 30px;
        }

        .card {
            background: var(--card-blue);
            border-radius: 16px;
            border: 1px solid var(--border-blue);
            overflow: hidden;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(5px);
            background: rgba(20, 27, 45, 0.7);
        }

        .card-header {
            padding: 20px 25px;
            border-bottom: 1px solid var(--border-blue);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .card-header h2 {
            font-size: 1.3rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .card-body {
            padding: 25px;
        }

        /* Input Section */
        .input-section {
            grid-column: span 2;
        }

        .instructions {
            background: rgba(30, 41, 59, 0.7);
            border-left: 4px solid var(--saffron);
            padding: 18px 20px;
            border-radius: 12px;
            margin-bottom: 25px;
            display: flex;
            gap: 15px;
        }

        .instructions i {
            color: var(--saffron);
            font-size: 1.4rem;
            margin-top: 3px;
        }

        .instructions p {
            margin-bottom: 10px;
            color: var(--text-light);
            line-height: 1.6;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 12px;
            font-weight: 600;
            color: var(--text-light);
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.1rem;
        }

        textarea#questionInput {
            width: 100%;
            padding: 18px;
            border: 1px solid var(--border-blue);
            border-radius: 12px;
            font-size: 16px;
            min-height: 150px;
            resize: vertical;
            transition: var(--transition);
            background: rgba(30, 41, 59, 0.5);
            color: var(--text-light);
            font-family: 'Poppins', sans-serif;
        }

        textarea#questionInput:focus {
            outline: none;
            border-color: var(--saffron);
            box-shadow: 0 0 0 3px rgba(255, 153, 51, 0.2);
        }

        textarea#questionInput::placeholder {
            color: #64748b;
        }

        button#askButton {
            background: linear-gradient(135deg, var(--saffron), var(--saffron-dark));
            color: white;
            padding: 18px 25px;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: 600;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            width: 100%;
            box-shadow: 0 4px 15px rgba(255, 153, 51, 0.3);
        }

        button#askButton:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(255, 153, 51, 0.4);
        }

        button#askButton:active {
            transform: translateY(0);
        }

        button#askButton:disabled {
            background: #64748b;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        /* Output Section */
        .output-section {
            grid-column: span 2;
        }

        .output-container {
            border-radius: 12px;
            overflow: hidden;
            border: 1px solid var(--border-blue);
            background: rgba(30, 41, 59, 0.5);
        }

        #outputArea {
            padding: 30px;
            min-height: 250px;
            white-space: pre-wrap;
            word-wrap: break-word;
            line-height: 1.8;
            font-size: 16px;
            background: transparent;
            max-height: 400px;
            overflow-y: auto;
        }
        
        #outputArea::-webkit-scrollbar { width: 8px; }
        #outputArea::-webkit-scrollbar-track { background: rgba(30, 41, 59, 0.5); border-radius: 4px; }
        #outputArea::-webkit-scrollbar-thumb { background: var(--saffron); border-radius: 4px; }
        #outputArea p { margin-bottom: 20px; }
        #outputArea strong { color: var(--saffron); }
        #outputArea ul { list-style-position: inside; padding-left: 10px; margin-bottom: 20px; }
        #outputArea li { margin-bottom: 10px; }
        #outputArea h3 { font-size: 1.2em; color: var(--gold); margin-bottom: 15px; border-bottom: 1px solid var(--border-blue); padding-bottom: 5px; }

        #outputArea code {
            background: var(--deep-blue);
            color: var(--text-secondary);
            padding: 3px 10px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 15px;
            border: 1px solid var(--border-blue);
        }

        .loading-indicator {
            text-align: center;
            padding: 30px;
            display: none;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 5px solid rgba(255, 153, 51, 0.2);
            border-top-color: var(--saffron);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .error-message {
            color: var(--danger);
            background: rgba(239, 68, 68, 0.1);
            padding: 20px;
            border-radius: 12px;
            margin: 15px 0;
            border-left: 4px solid var(--danger);
            font-weight: 500;
            display: flex;
            gap: 12px;
            align-items: center;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 25px;
        }

        .stat-card {
            background: rgba(30, 41, 59, 0.7);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid var(--border-blue);
            text-align: center;
            transition: var(--transition);
        }

        .stat-card:hover {
            transform: translateY(-5px);
            border-color: var(--saffron);
        }

        .stat-value {
            font-size: 2.5rem;
            font-weight: 700;
            background: linear-gradient(to right, var(--saffron), var(--gold));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin: 10px 0;
        }

        .stat-label {
            color: var(--text-secondary);
            font-size: 0.95rem;
        }

        /* Responsive Design */
        @media (max-width: 1100px) {
            .dashboard { grid-template-columns: 1fr; }
            .input-section, .output-section { grid-column: span 1; }
        }

        @media (max-width: 768px) {
            .sidebar { width: 70px; overflow: hidden; }
            .logo-text, .menu-text, .sidebar-footer p { display: none; }
            .logo { justify-content: center; padding: 0 10px 20px; }
            .menu-item { justify-content: center; padding: 15px; }
            .main-content { margin-left: 70px; padding: 20px; }
            .header { flex-direction: column; align-items: flex-start; gap: 20px; }
            .header h1 { font-size: 1.8rem; }
            .ashoka-emblem { display: none; }
        }

        @media (max-width: 480px) {
            .sidebar { display: none; }
            .main-content { margin-left: 0; }
            .stats { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <!-- This is the Ashoka Emblem you asked for -->
    <div class="ashoka-emblem">
        <img src="https://upload.wikimedia.org/wikipedia/commons/5/55/Emblem_of_India.svg" alt="Ashoka Emblem">
    </div>

    <!-- Sidebar -->
    <div class="sidebar">
        <div class="logo">
            <div class="logo-icon">
                <i class="fas fa-book-open"></i>
            </div>
            <div class="logo-text">UPSC Pathshala</div>
        </div>
        
        <div class="sidebar-menu">
            <div class="menu-item active">
                <i class="fas fa-tachometer-alt"></i>
                <span class="menu-text">Dashboard</span>
            </div>
            <div class="menu-item">
                <i class="fas fa-landmark"></i>
                <span class="menu-text">History</span>
            </div>
            <div class="menu-item">
                <i class="fas fa-gavel"></i>
                <span class="menu-text">Polity</span>
            </div>
            <div class="menu-item">
                <i class="fas fa-globe-asia"></i>
                <span class="menu-text">Geography</span>
            </div>
             <div class="menu-item">
                <i class="fas fa-newspaper"></i>
                <span class="menu-text">Current Affairs</span>
            </div>
            <div class="menu-item">
                <i class="fas fa-cog"></i>
                <span class="menu-text">Settings</span>
            </div>
        </div>
        
        <div class="sidebar-footer">
            <p>Jai Hind</p>
        </div>
    </div>
    
    <!-- Main Content -->
    <div class="main-content">
        <div class="header">
            <h1>UPSC Aspirant's AI Mentor</h1>
            <div class="user-controls">
                <button class="btn">
                    <i class="fas fa-user-circle"></i>
                    <span>Profile</span>
                </button>
            </div>
        </div>
        
        <div class="dashboard">
            <!-- Stats Cards -->
            <div class="card">
                <div class="card-body">
                    <div class="stats">
                        <div class="stat-card">
                            <i class="fas fa-check-double fa-2x" style="color: var(--saffron);"></i>
                            <div class="stat-value">1,248</div>
                            <div class="stat-label">Doubts Cleared</div>
                        </div>
                        <div class="stat-card">
                            <i class="fas fa-book fa-2x" style="color: var(--green);"></i>
                            <div class="stat-value">12</div>
                            <div class="stat-label">Subjects Covered</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h2><i class="fas fa-star" style="color: var(--gold);"></i> Popular Topics</h2>
                </div>
                <div class="card-body">
                    <ul style="list-style-type: none; line-height: 2.2;">
                        <li><i class="fas fa-chevron-right" style="color: var(--saffron); margin-right: 10px;"></i> Fundamental Rights</li>
                        <li><i class="fas fa-chevron-right" style="color: var(--saffron); margin-right: 10px;"></i> DPSP & Fundamental Duties</li>
                        <li><i class="fas fa-chevron-right" style="color: var(--saffron); margin-right: 10px;"></i> Indus Valley Civilization</li>
                        <li><i class="fas fa-chevron-right" style="color: var(--saffron); margin-right: 10px;"></i> Monetary Policy (RBI)</li>
                        <li><i class="fas fa-chevron-right" style="color: var(--saffron); margin-right: 10px;"></i> Parliament & State Legislature</li>
                    </ul>
                </div>
            </div>
            
            <!-- Input Section -->
            <div class="card input-section">
                <div class="card-header">
                    <h2><i class="fas fa-question-circle" style="color: var(--saffron);"></i> Ask Your Doubt</h2>
                </div>
                <div class="card-body">
                    <div class="instructions">
                        <i class="fas fa-info-circle"></i>
                        <div>
                            <p><strong>How to use:</strong> Ask any question related to the UPSC syllabus - GS Papers, Current Affairs, or even Essay strategy. I am trained to provide structured and relevant answers.</p>
                            <p>For questions outside the syllabus, I will politely decline to answer.</p>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="questionInput">
                            <i class="fas fa-pen-fancy"></i>
                            Your Question
                        </label>
                        <textarea id="questionInput" placeholder="e.g., Explain the Basic Structure Doctrine with relevant case laws. What were the causes of the 1857 revolt?"></textarea>
                    </div>
                    
                    <button id="askButton">
                        <i class="fas fa-paper-plane"></i>
                        Get Clarification
                    </button>
                </div>
            </div>
            
            <!-- Output Section -->
            <div class="card output-section">
                <div class="card-header">
                    <h2><i class="fas fa-graduation-cap" style="color: var(--green);"></i> Mentor's Explanation</h2>
                </div>
                <div class="card-body">
                    <div class="loading-indicator" id="loadingIndicator">
                        <div class="spinner"></div>
                        <p>Researching sources and structuring the best possible answer...</p>
                    </div>
                    
                    <div class="output-container">
                        <div id="outputArea">
                            <!-- Initial welcome message will be populated by JS -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const questionInput = document.getElementById('questionInput');
        const askButton = document.getElementById('askButton');
        const outputArea = document.getElementById('outputArea');
        const loadingIndicator = document.getElementById('loadingIndicator');

        // IMPORTANT: Replace "YOUR_API_KEY_HERE" with your actual Gemini API Key
        const GEMINI_API_KEY = "AIzaSyCN2Pv0NLwAlOASkj8RFd2PkVUldfMeQwY"; 
        // ========================================================================
        const MODEL_NAME = "gemini-1.5-flash";

        // This prompt defines the AI's persona as a UPSC mentor.
        const systemInstructionText = `You are 'UPSC Pathshala AI', an expert mentor for Indian Civil Services (UPSC) aspirants. Your sole purpose is to answer questions related to the UPSC syllabus which includes subjects like Indian History, Polity, Governance, Constitution, Geography, Economy, Science & Technology, Environment, and Current Affairs.

        When a user asks a question:
        1.  **Provide a well-structured and comprehensive answer.** Use headings, bullet points (using *), and bold text (using **text**) to make the information easy to digest and remember.
        2.  **Maintain a formal, encouraging, and professional tone.** Address the user as an aspirant.
        3.  **If the question is ambiguous,** ask for clarification.
        4.  **If a question requires historical context or case laws** (like in Polity), be sure to include them.
        5.  **For non-UPSC related questions** (like movies, casual chat, coding, etc.), you MUST politely decline. For example, say: "As the UPSC Pathshala AI, my expertise is focused on subjects relevant to the Civil Services Examination. I can assist you with topics like history, polity, or economy. How can I help you with your preparation today?"
        6.  Do not reveal you are an AI model unless directly asked. Your persona is a digital mentor.`;


        askButton.addEventListener('click', async () => {
            const question = questionInput.value.trim();

            if (!question) {
                outputArea.innerHTML = '<div class="error-message"><i class="fas fa-exclamation-circle"></i> Please enter a question first!</div>';
                return;
            }
             if (GEMINI_API_KEY === "YOUR_API_KEY_HERE" || !GEMINI_API_KEY) {
                outputArea.innerHTML = `<div class="error-message"><i class="fas fa-key"></i> <strong>API Key Missing!</strong> Please replace "YOUR_API_KEY_HERE" in the script with your actual Gemini API key. You can get a key from Google AI Studio.</div>`;
                return;
            }

           
            outputArea.innerHTML = '';
            loadingIndicator.style.display = 'block';
            askButton.disabled = true;

            const API_URL = `https://generativelanguage.googleapis.com/v1beta/models/${MODEL_NAME}:generateContent?key=${GEMINI_API_KEY}`;

            const requestBody = {
                contents: [{ role: "user", parts: [{ text: question }] }],
                systemInstruction: { parts: [{ text: systemInstructionText }] }
            };

            try {
                const response = await fetch(API_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(requestBody),
                });

                if (!response.ok) {
                    const errorData = await response.json();
                    let errorMsg = `API Error: ${response.status}. ${errorData.error?.message || 'Unknown error.'}`;
                    if (errorData.error?.message.toLowerCase().includes("api key not valid")) {
                        errorMsg += "<br><strong>Please check your API key.</strong> Ensure it's correct and enabled for the Gemini API.";
                    }
                    throw new Error(errorMsg);
                }

                const data = await response.json();

                if (data.candidates?.[0]?.content?.parts?.[0]?.text) {
                    let answerText = data.candidates[0].content.parts[0].text;
                    
                    // Basic Markdown to HTML conversion
                    // Bold: **text** -> <strong>text</strong>
                    answerText = answerText.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
                    
                    // Headings: ### heading -> <h3>heading</h3>
                    answerText = answerText.replace(/^### (.*$)/gim, '<h3>$1</h3>');

                    // Lists: * item -> <li>item</li> and wrap in <ul>
                    answerText = answerText.replace(/^\* (.*$)/gim, '<li>$1</li>');
                    answerText = answerText.replace(/<\/li>\n<li>/g, '</li><li>'); // Join consecutive list items
                    // Find all list blocks and wrap them in <ul>
                    answerText = answerText.replace(/(<li>(.*?)<\/li>\s*)+/gs, (match) => `<ul>${match.trim()}</ul>`);
                    
                    // Paragraphs
                    const paragraphs = answerText.split('\n\n');
                    let htmlOutput = paragraphs.map(p => {
                        // Don't wrap ul/h3 in p tags
                        if (p.trim().startsWith('<ul>') || p.trim().startsWith('<h3>')) {
                            return p;
                        }
                        return p.trim() ? `<p>${p}</p>` : '';
                    }).join('');

                    outputArea.innerHTML = htmlOutput.replace(/\n/g, '<br>');

                } else if (data.promptFeedback?.blockReason) {
                     outputArea.innerHTML = `<div class="error-message"><i class="fas fa-ban"></i> Request blocked by safety settings: ${data.promptFeedback.blockReason}.</div>`;
                } else {
                    console.warn("Unexpected response structure:", data);
                    outputArea.innerHTML = '<div class="error-message"><i class="fas fa-exclamation-triangle"></i> Received an unexpected response from the AI.</div>';
                }

            } catch (error) {
                console.error('Frontend Error:', error);
                outputArea.innerHTML = `<div class="error-message"><i class="fas fa-bug"></i> Failed to get an answer: ${error.message}</div>`;
            } finally {
                askButton.disabled = false;
                loadingIndicator.style.display = 'none';
            }
        });

        questionInput.addEventListener('keypress', function(event) {
            if (event.key === 'Enter' && !event.shiftKey) {
                event.preventDefault();
                askButton.click();
            }
        });

        document.querySelectorAll('.menu-item').forEach(item => {
            item.addEventListener('click', function() {
                document.querySelectorAll('.menu-item').forEach(i => i.classList.remove('active'));
                this.classList.add('active');
            });
        });

        // Set an initial welcome message and example
        function setInitialMessage() {
            outputArea.innerHTML = `
                <p><strong>Welcome, Aspirant!</strong> I am your AI Mentor, here to assist you on your journey to success in the Civil Services Examination.</p>
                <p>Feel free to ask me about any topic from the syllabus. Here's a quick example of how I can help:</p>
                <h3>Preamble of the Indian Constitution</h3>
                <p>The Preamble is the introductory statement to the Constitution, setting out its guiding purpose, principles, and philosophy. It is based on the 'Objectives Resolution', drafted and moved by Pandit Nehru.</p>
                <strong>Key Components:</strong>
                <ul>
                    <li><strong>Source of authority:</strong> It states that the Constitution derives its authority from "WE, THE PEOPLE OF INDIA".</li>
                    <li><strong>Nature of Indian State:</strong> Declares India to be a Sovereign, Socialist, Secular, and Democratic Republic.</li>
                    <li><strong>Objectives:</strong> Aims to secure Justice, Liberty, Equality for all citizens, and promote Fraternity to maintain the unity and integrity of the nation.</li>
                </ul>
                <p>You can ask for more details, like <code>"Explain the terms Socialist and Secular in the context of the Preamble."</code></p>
            `;
        }
        setInitialMessage();

    </script>
</body>
</html>